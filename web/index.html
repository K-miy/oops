<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#2D6A4F" />
  <meta name="description" content="Out of Parent's Shape ‚Äî programme fitness personnalis√©, 100% local" />

  <title>OOPS</title>

  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  <link rel="stylesheet" href="/css/main.css" />

  <!-- importmap : r√©sout les modules ES sans bundler -->
  <script type="importmap">
  {
    "imports": {
      "oops": "./pkg/oops.js",
      "dexie": "https://cdn.jsdelivr.net/npm/dexie@3.2.6/dist/dexie.mjs"
    }
  }
  </script>
</head>
<body>
  <div id="app">

    <!-- ‚îÄ‚îÄ‚îÄ CHARGEMENT ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-loading" class="screen active" role="status" aria-live="polite">
      <div class="loading-inner">
        <div class="loading-brand">
          <div class="loading-logo">OOPS</div>
          <p class="loading-tagline">Out of Parent's Shape</p>
        </div>
        <div class="loading-spinner" aria-hidden="true"></div>
        <p class="loading-msg" id="loading-msg">Chargement‚Ä¶</p>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ DISCLAIMER ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-disclaimer" class="screen" aria-labelledby="disclaimer-title">
      <div class="screen-content">
        <header class="screen-header">
          <h1 id="disclaimer-title" data-i18n="disclaimer.title">Avertissement m√©dical</h1>
        </header>
        <main class="disclaimer-body">
          <div class="disclaimer-icon" aria-hidden="true">‚ö†Ô∏è</div>
          <p data-i18n="disclaimer.body"></p>
        </main>
        <footer class="screen-footer">
          <button id="disclaimer-accept-btn" class="btn btn-primary" data-i18n="disclaimer.accept">
            Je confirme
          </button>
        </footer>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ ONBOARDING ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-onboarding" class="screen" aria-labelledby="onboarding-title">
      <div class="screen-content">
        <header class="screen-header">
          <button id="onboarding-back-btn" class="btn-icon" aria-label="Retour" hidden>‚Äπ</button>
          <h1 id="onboarding-title" data-i18n="onboarding.title">Bienvenue dans OOPS</h1>
          <div class="step-indicator" id="step-indicator" aria-label="√âtape 1 sur 5">
            <span class="step active"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
          </div>
        </header>
        <main id="onboarding-step-content" class="onboarding-content">
          <!-- Rendu dynamiquement par onboarding.js -->
        </main>
        <footer class="screen-footer">
          <button id="onboarding-next-btn" class="btn btn-primary" data-i18n="onboarding.next">Suivant</button>
        </footer>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ ACCUEIL ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-home" class="screen" aria-labelledby="home-title">
      <div class="screen-content">
        <header class="screen-header">
          <h1 id="home-title">OOPS</h1>
          <button class="btn-icon" id="home-settings-btn" aria-label="Param√®tres">‚öô</button>
        </header>
        <main id="home-main" class="home-content">
          <!-- Rendu dynamiquement par home.js -->
        </main>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ HISTORIQUE ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-history" class="screen" aria-labelledby="history-title">
      <div class="screen-content">
        <header class="screen-header">
          <h1 id="history-title" data-i18n="nav.history">Historique</h1>
        </header>
        <main id="history-main" class="history-content">
          <!-- Rendu dynamiquement par history.js -->
        </main>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ S√âANCE ACTIVE ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-session" class="screen" aria-labelledby="session-title">
      <div class="screen-content">
        <header class="screen-header">
          <button id="session-close-btn" class="btn-icon" aria-label="Fermer la s√©ance">‚úï</button>
          <h1 id="session-title" data-i18n="session.title">S√©ance en cours</h1>
        </header>
        <div id="session-progress" class="session-progress" aria-live="polite"></div>
        <main id="session-main" class="session-content">
          <!-- Rendu dynamiquement par session.js -->
        </main>
        <footer class="screen-footer" id="session-footer">
          <!-- Boutons dynamiques -->
        </footer>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ PARAM√àTRES ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-settings" class="screen" aria-labelledby="settings-title">
      <div class="screen-content">
        <header class="screen-header">
          <button class="btn-icon" id="settings-back-btn" aria-label="Retour">‚Äπ</button>
          <h1 id="settings-title" data-i18n="settings.title">Param√®tres</h1>
        </header>
        <main id="settings-main" class="settings-content">
          <!-- Rendu dynamiquement -->
        </main>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ √Ä PROPOS DU PROGRAMME ‚îÄ‚îÄ‚îÄ -->
    <div id="screen-about" class="screen" aria-labelledby="about-title">
      <div class="screen-content">
        <header class="screen-header">
          <button id="about-back-btn" class="btn-icon" aria-label="Retour">‚Äπ</button>
          <h1 id="about-title" data-i18n="about.title">√Ä propos du programme</h1>
        </header>
        <main id="about-main" class="about-content">
          <!-- Rendu dynamiquement par about.js -->
        </main>
      </div>
    </div>

  </div><!-- #app -->

  <!-- Navigation globale (hors #app pour √©viter le clipping overflow:hidden) -->
  <nav id="bottom-nav" class="bottom-nav" role="navigation" aria-label="Navigation principale" hidden>
    <button class="nav-item active" data-screen="home" aria-current="page">
      <span class="nav-icon" aria-hidden="true">üè†</span>
      <span class="nav-label" data-i18n="nav.home">Accueil</span>
    </button>
    <button class="nav-item" data-screen="history">
      <span class="nav-icon" aria-hidden="true">üìä</span>
      <span class="nav-label" data-i18n="nav.history">Historique</span>
    </button>
    <button class="nav-item" data-screen="settings">
      <span class="nav-icon" aria-hidden="true">‚öô</span>
      <span class="nav-label" data-i18n="nav.settings">Param√®tres</span>
    </button>
  </nav>

  <!-- Banni√®re install PWA (affich√©e via beforeinstallprompt) -->
  <div id="pwa-install-banner" class="pwa-install-banner" hidden aria-live="polite">
    <div class="pwa-install-top">
      <div class="pwa-install-text" id="pwa-install-text">Installer OOPS sur votre √©cran d'accueil ?</div>
      <button class="btn-icon pwa-install-dismiss" id="pwa-install-dismiss" aria-label="Fermer">‚úï</button>
    </div>
    <button class="btn btn-accent pwa-install-btn" id="pwa-install-btn">Installer</button>
  </div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
